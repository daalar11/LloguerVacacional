<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="plantilla/template :: head(type='tag')"></div>

</head>

<body>

<header th:replace="plantilla/template :: header" ></header>

<div class="container p-4 mt-5 border-start border-end shadow-lg bg-body rounded">
    <main>
        <div class="row d-flex justify-content-between">
            <div class="col-5 pt-2">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item active" aria-current="page">Llista de Propietats</li>
                    </ol>
                </nav>
            </div>
            <div class="col-5 text-end">
                <a  class="btn btn-outline-dark" th:text="'Nova propietat'" th:href="@{'/views/propietats/create/'+${id}}"></a>
            </div>
        </div>
        <hr>
        <div class="row">
            <div class="card p-3 mt-3 mb-3 bg-light">
                <table id="table_id" class="table table-striped">
                    <!-- CAPÇALERA DE LA TAULA -->
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col">Id</th>
                        <th scope="col">Propietat</th>
                        <th scope="col">Localitat</th>
                        <th scope="col">Direccio</th>
                        <th scope="col">Preu Base</th>
                        <th scope="col">Configuració Casa</th>
                        <th scope="col">Eliminar</th>
                    </tr>
                    </thead>
                    <!-- COS DE LA DATATABLE -->
                    <tbody>
                    <tr th:each="pr:${propietats}">
                        <th th:text="${pr.idPROPIETAT}"></th>
                        <td th:text="${pr.nomPropietat}"></td>
                        <td th:text="${pr.localitat.nomLocalitat}"></td>
                        <td th:text="${pr.direccio}"></td>
                        <td th:text="${#numbers.formatCurrency(pr.preuBase)}"></td>
                        <td><a class="btn btn-primary" th:href="@{'/views/propietats/configurar/' + ${pr.idPROPIETAT}}">Configurar casa </a></td>
                        <td><a class="btn btn-danger" th:href="@{'/views/propietats/delete/' + ${pr.idPROPIETAT}}" th:text="'Eliminar Propietat'" title="Eliminar Propietat" onclick="return confirm('Estas segur que vols eliminar el registre?');"></a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</div>

<footer>
    <div th:replace="plantilla/template :: footer"></div>
</footer>

<script th:inline="javascript">

    $(document).ready(function() {
        veureTaula();
    });

</script>

</body>
</html>